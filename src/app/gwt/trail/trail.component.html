<!--
  ~ Board Game Fiesta
  ~ Copyright (C)  2021 Tom Wetjens <tomwetjens@gmail.com>
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<ng-template #popoverA>
  <gwt-building-popover [table]="table" building="A"></gwt-building-popover>
</ng-template>
<ng-template #popoverB>
  <gwt-building-popover [table]="table" building="B"></gwt-building-popover>
</ng-template>
<ng-template #popoverC>
  <gwt-building-popover [table]="table" building="C"></gwt-building-popover>
</ng-template>
<ng-template #popoverD>
  <gwt-building-popover [table]="table" building="D"></gwt-building-popover>
</ng-template>
<ng-template #popoverE>
  <gwt-building-popover [table]="table" building="E"></gwt-building-popover>
</ng-template>
<ng-template #popoverF>
  <gwt-building-popover [table]="table" building="F"></gwt-building-popover>
</ng-template>
<ng-template #popoverG>
  <gwt-building-popover [table]="table" building="G"></gwt-building-popover>
</ng-template>
<ng-template #popoverLocationA>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="A"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationB>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="B"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationC>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="C"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationD>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="D"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationE>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="E"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationF>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="F"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationG>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="G"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationG1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="G-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationG2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="G-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationA1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="A-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationA2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="A-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationA3>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="A-3"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationFlood1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="FLOOD-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationFlood2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="FLOOD-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationFlood3>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="FLOOD-3"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationFlood4>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="FLOOD-4"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationFloodRisk1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="FLOOD-RISK-1"
                        [risk]="true"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationFloodRisk2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="FLOOD-RISK-2"
                        [risk]="true"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationDrought1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="DROUGHT-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationDrought2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="DROUGHT-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationDrought3>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="DROUGHT-3"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationDrought4>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="DROUGHT-4"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationDroughtRisk1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="DROUGHT-RISK-1"
                        [risk]="true"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationB1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="B-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationB2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="B-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationB3>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="B-3"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationC11>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="C-1-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationC12>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="C-1-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationC2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="C-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationD1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="D-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationE1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="E-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationE2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="E-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationF1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="F-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationF2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="F-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationIndianTradeRisk1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="INDIAN-TRADE-RISK-1"
                        [risk]="true"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationIndianTradeRisk2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="INDIAN-TRADE-RISK-2"
                        [risk]="true"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationRockfall1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="ROCKFALL-1"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationRockfall2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="ROCKFALL-2"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationRockfall3>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="ROCKFALL-3"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationRockfall4>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="ROCKFALL-4"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationRockfallRisk1>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="ROCKFALL-RISK-1"
                        [risk]="true"></gwt-location-popover>
</ng-template>
<ng-template #popoverLocationRockfallRisk2>
  <gwt-location-popover [table]="table" [trail]="state.trail" name="ROCKFALL-RISK-2"
                        [risk]="true"></gwt-location-popover>
</ng-template>

<svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  version="1.1"
  [attr.viewBox]="'0 -20 800 ' + (state.railsToTheNorth ? 1015 : 820)"
  style="width:100%; height:100%">
  <defs>
    <rect id="smallLocation"
          rx="2.0045242"
          ry="2.2636971"
          height="41.66"
          width="36.80"/>

    <use id="teepeeLocation" xlink:href="#smallLocation"/>

    <path
      id="rancher"
      d="m 11.219139,1.8480133 8.619443,0.668173 1.336347,3.207234 3.808592,0.868625 1.00226,1.202713 -1.5368,3.7417747 -4.142677,0.400905 -0.467722,1.870884 c 0,0 6.681737,2.472243 5.946748,5.078122 -0.734991,2.605878 -1.804069,5.278572 -1.804069,5.278572 0,0 -0.868627,0.801809 -2.605879,1.737254 -1.737251,0.935442 -0.334086,0.133633 -0.334086,0.133633 l 1.670433,4.677217 c 0,0 2.939965,1.269532 3.140416,3.741774 -0.133633,-0.267268 0,0 0,0 l -1.135896,3.274052 -6.815372,-0.267271 c 0,0 -1.202712,-0.267269 -1.536798,-1.870885 -0.334087,-1.603618 -0.935445,-2.939965 -0.935445,-2.939965 0,0 -2.405425,-2.739514 -2.873148,0.133633 -0.233858,0.384201 0,0 0,0 l -1.670433,3.407688 c 0,0 -0.400905,1.135896 -1.4699834,1.069078 -1.069078,-0.06682 -6.681737,-0.467722 -6.681737,-0.467722 l 2.739512,-5.479024 1.336346,-0.133636 1.269532,-4.677216 c 0,0 -6.080381,-2.605879 -5.34539,-5.278573 0.734991,-2.672696 5.879928,-4.543583 5.879928,-4.543583 l -1.135893,-5.011304 -4.34313,-0.801807 c 0,0 -0.400905,-1.2695307 0.334086,-2.4722447 0.734992,-1.202711 1.870887,-2.672694 1.870887,-2.672694 l 3.407686,-0.334086 z"
      transform="scale(0.7,0.7)"/>

    <clipPath id="tileclip">
      <rect rx="6" ry="6" width="33" height="39"/>
    </clipPath>

    <clipPath id="buildingclip">
      <rect rx="8" ry="8" width="68.08" height="66.49"/>
    </clipPath>

    <g id="COWBOY">
      <image id="cowboy" href="/assets/games/gwt/cowboy.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect height="39" width="33" rx="6" ry="6"/>
    </g>
    <g id="CRAFTSMAN">
      <image href="/assets/games/gwt/craftsman.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect height="39" width="33" rx="6" ry="6"/>
    </g>
    <g id="ENGINEER">
      <image href="/assets/games/gwt/engineer.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect height="39" width="33" rx="6" ry="6"/>
    </g>
    <g id="GREEN">
      <image href="/assets/games/gwt/teepee_green.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="BLUE">
      <image href="/assets/games/gwt/teepee_blue.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="FLOOD_BLACK">
      <image href="/assets/games/gwt/flood_black.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="FLOOD_GREEN">
      <image href="/assets/games/gwt/flood_green.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="DROUGHT_BLACK">
      <image href="/assets/games/gwt/drought_black.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="DROUGHT_GREEN">
      <image href="/assets/games/gwt/drought_green.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="ROCKFALL_BLACK">
      <image href="/assets/games/gwt/rockfall_black.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="ROCKFALL_GREEN">
      <image href="/assets/games/gwt/rockfall_green.png" width="33" height="39" clip-path="url(#tileclip)"/>
      <rect x="0" y="0" width="33" height="39" rx="6" ry="6"/>
    </g>
    <g id="GAIN_2_DOLLARS_POINT_FOR_EACH_WORKER">
      <image href="/assets/games/gwt/point_per_worker.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="REMOVE_HAZARD_OR_TEEPEE_POINTS_FOR_EACH_2_OBJECTIVE_CARDS">
      <image href="/assets/games/gwt/points_per_2_objective_cards.png" width="33" height="39"
             clip-path="url(#tileclip)"/>
    </g>
    <g id="PERM_CERT_POINTS_FOR_EACH_2_HAZARDS">
      <image href="/assets/games/gwt/points_per_pair_hazards.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="PERM_CERT_POINTS_FOR_TEEPEE_PAIRS">
      <image href="/assets/games/gwt/points_per_pair_teepees.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="PERM_CERT_POINTS_FOR_EACH_2_CERTS">
      <image href="/assets/games/gwt/points_per_2_certs.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="TWO_PERM_CERTS">
      <image href="/assets/games/gwt/sm/2_perm_certs.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="TWELVE_DOLLARS">
      <image href="/assets/games/gwt/sm/12_dollars.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="PERM_CERT_POINTS_PER_2_STATIONS">
      <image href="/assets/games/gwt/sm/points_per_2_stations.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="GAIN_2_CERTS_POINTS_PER_BUILDING">
      <image href="/assets/games/gwt/sm/2_certs.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="PLACE_BRANCHLET_POINTS_PER_2_EXCHANGE_TOKENS">
      <image href="/assets/games/gwt/sm/place_branchlet.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>
    <g id="GAIN_EXCHANGE_TOKEN_POINTS_PER_AREA">
      <image href="/assets/games/gwt/sm/points_per_area.png" width="33" height="39" clip-path="url(#tileclip)"/>
    </g>

    <clipPath id="mediumTownTileClip">
      <rect rx="4" ry="4" width="33" height="33"/>
    </clipPath>

    <g id="GAIN_5_DOLLARS_OR_TAKE_CATTLE_CARD">
      <image href="/assets/games/gwt/mt/gain5_take3card.png" x="0" y="0" width="33" height="33"
             clip-path="url(#mediumTownTileClip)"/>
    </g>
    <g id="HIRE_WORKER_PLUS_2">
      <image href="/assets/games/gwt/mt/hire_worker_plus2.png" x="0" y="0" width="33" height="33"
             clip-path="url(#mediumTownTileClip)"/>
    </g>
    <g id="REMOVE_2_CARDS">
      <image href="/assets/games/gwt/mt/remove_2_cards.png" x="0" y="0" width="33" height="33"
             clip-path="url(#mediumTownTileClip)"/>
    </g>
    <g id="MOVE_ENGINE_3_FORWARD">
      <image href="/assets/games/gwt/mt/move_engine_3.png" x="0" y="0" width="33" height="33"
             clip-path="url(#mediumTownTileClip)"/>
    </g>
    <g id="PLACE_BUILDING_FOR_FREE">
      <image href="/assets/games/gwt/mt/place_building_free.png" x="0" y="0" width="33" height="33"
             clip-path="url(#mediumTownTileClip)"/>
    </g>

    <clipPath id="tokenclip">
      <circle r="15" cx="15" cy="15"/>
    </clipPath>

    <g id="jobMarketToken">
      <image href="/assets/games/gwt/job_market_token.png" width="30" height="30" clip-path="url(#tokenclip)"/>
    </g>

    <g id="engine">
      <g transform="translate(0,2) scale(1.2)">
        <g transform="translate(-71.198 -212.35)">
          <path
            d="m90.485 223.21c0-0.0136-0.27529 0-0.27529 0v0.7192c0 0.0931-0.0652 0.17013-0.14562 0.17013h-1.4702c-0.0804 0-0.1456-0.0763-0.1456-0.17013v-0.83213h-0.5536c-0.52861 2.1939-2.8953 1.7353-3.2107 0h-0.74014c-0.5286 2.1939-2.8954 1.7353-3.2107 0h-0.74016c-0.52867 2.1939-2.8954 1.7354-3.2107 0h-5.5846v-1.2616h1.3492v-5.3665h2.7767v-2.0146h-1.2477v-0.91443h6.5318v2.3576h1.7803s-5.55e-4 0-5.55e-4 -0.0136v-1.2284c0-0.13437 0.09299-0.24312 0.20799-0.24312h0.81325c0.11484 0 0.20806 0.10907 0.20806 0.24312v1.2284s-5.56e-4 0-5.56e-4 0.0136h1.2606l0.01522-1.6504c0.27522-0.96451 1.6972-0.94307 2.0091 0l-0.0152 1.6504h2.2965v-3.5437h1.5045v3.5295h0.99813l0.0463 0.0899 5.55e-4 0.45058c0.264 0.51048 0.41651 1.1085 0.41651 1.7481 0 0.63503-0.15002 1.2291-0.41041 1.737l5.56e-4 0.33482h2.0305v1.5941h1.3426v1.2617h-2.0926c1e-3 0.0293 3e-3 0.0585 3e-3 0.0878-0.0375 1.7036-2.4523 2.0334-2.537 0.0225z"/>
        </g>
      </g>
    </g>

    <g id="branchlet">
      <g transform="scale(0.9)">
        <g transform="translate(-27.898 -38.148)">
          <path d="m38.243 38.148-5.1723 2.9476-5.1723 2.9471h2.6091v8.4543h15.376v-8.4543h2.7037l-5.1723-2.9471z"/>
        </g>
      </g>
    </g>
  </defs>
  <image [attr.href]="'/assets/games/' + table.game + '/board.png'" x="0" [attr.y]="state.railsToTheNorth ? 195 : 0"
         height="800"
         width="800"></image>
  <g *ngIf="state.railsToTheNorth">
    <image [attr.href]="'/assets/games/' + table.game + '/rttn.png'" x="0" y="0" height="250" width="800"></image>

    <g transform="translate(24.5,65)">
      <g *ngIf="state.railroadTrack.stations[10]?.stationMaster"
         ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[10].stationMaster.toString()|translate}}"
         triggers="mouseenter:mouseleave"
         container="body">
        <use [attr.xlink:href]="'#' + state.railroadTrack.stations[10].stationMaster"/>
      </g>
      <use *ngIf="state.railroadTrack.stations[10]?.worker"
           [attr.xlink:href]="'#' + state.railroadTrack.stations[10].worker" class="worker disabled"/>
    </g>

    <g transform="translate(422,95)">
      <g *ngIf="state.railroadTrack.stations[11]?.stationMaster"
         ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[11].stationMaster.toString()|translate}}"
         triggers="mouseenter:mouseleave"
         container="body">
        <use [attr.xlink:href]="'#' + state.railroadTrack.stations[11].stationMaster"/>
      </g>
      <use *ngIf="state.railroadTrack.stations[11]?.worker"
           [attr.xlink:href]="'#' + state.railroadTrack.stations[11].worker" class="worker disabled"/>
    </g>

    <g *ngFor="let mediumTownTile of mediumTownTiles | keyvalue" class="mediumTownTile"
       [attr.transform]="'translate(' + mediumTownTile.value.x + ',' + mediumTownTile.value.y + ')'"
       ngbPopover="{{'gwt.popover.mediumTownTile.' + state.railroadTrack.towns[mediumTownTile.key]?.mediumTownTile.toString()|translate}}"
       triggers="mouseenter:mouseleave"
       container="body">
      <use [attr.xlink:href]="'#' + state.railroadTrack.towns[mediumTownTile.key]?.mediumTownTile"/>
    </g>

    <circle *ngFor="let color of state.railroadTrack.stations[10].players; index as i" [class]="'disc ' + color"
            cx="75" [attr.cy]="89 - (i * 4)" r="11"/>
    <g class="station" [attr.transform]="'translate(59,73)'" [ngClass]="{disabled:!canSelectStation(10)}"
       (click)="selectStation(10)">
      <rect width="33" height="33" rx="6" ry="6" x="0" y="0"/>
    </g>

    <circle *ngFor="let color of state.railroadTrack.stations[11].players; index as i" [class]="'disc ' + color"
            cx="473" [attr.cy]="120 - (i * 4)" r="11"/>
    <g class="station" [attr.transform]="'translate(456,104)'" [ngClass]="{disabled:!canSelectStation(11)}"
       (click)="selectStation(11)">
      <rect width="33" height="33" rx="6" ry="6" x="0" y="0"/>
    </g>

    <circle *ngFor="let color of state.railroadTrack.cities['MEMPHIS']; index as i" [class]="'disc ' + color"
            cx="140" [attr.cy]="144 - (i * 4)" r="11"/>
    <rect class="city" x="115" y="127" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('MEMPHIS')" [ngClass]="{disabled:!canSelectCity('MEMPHIS')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['SAN_FRANCISCO']; index as i" [class]="'disc ' + color"
            cx="188.5" [attr.cy]="53 - (i * 4)" r="11"/>
    <rect class="city" x="163" y="35" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('SAN_FRANCISCO')" [ngClass]="{disabled:!canSelectCity('SAN_FRANCISCO')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['DENVER']; index as i" [class]="'disc ' + color"
            cx="336" [attr.cy]="53 - (i * 4)" r="11"/>
    <rect class="city" x="310" y="35" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('DENVER')" [ngClass]="{disabled:!canSelectCity('DENVER')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['MILWAUKEE']; index as i" [class]="'disc ' + color"
            cx="414" [attr.cy]="54 - (i * 4)" r="11"/>
    <rect class="city" x="388" y="36" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('MILWAUKEE')" [ngClass]="{disabled:!canSelectCity('MILWAUKEE')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['GREEN_BAY']; index as i" [class]="'disc ' + color"
            cx="543" [attr.cy]="53 - (i * 4)" r="11"/>
    <rect class="city" x="517" y="36" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('GREEN_BAY')" [ngClass]="{disabled:!canSelectCity('GREEN_BAY')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['MINNEAPOLIS']; index as i" [class]="'disc ' + color"
            cx="695.5" [attr.cy]="54 - (i * 4)" r="11"/>
    <rect class="city" x="670" y="36" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('MINNEAPOLIS')" [ngClass]="{disabled:!canSelectCity('MINNEAPOLIS')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['MONTREAL']; index as i" [class]="'disc ' + color"
            cx="769.5" [attr.cy]="100 - (i * 4)" r="11"/>
    <rect class="city" x="744" y="82" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('MONTREAL')" [ngClass]="{disabled:!canSelectCity('MONTREAL')}"/>

    <circle *ngFor="let color of state.railroadTrack.cities['TORONTO']; index as i" [class]="'disc ' + color"
            cx="621" [attr.cy]="150 - (i * 4)" r="11"/>
    <rect class="city" x="596" y="132" rx="2" ry="2" height="50" width="52"
          (click)="selectCity('TORONTO')" [ngClass]="{disabled:!canSelectCity('TORONTO')}"/>

    <g *ngFor="let town of towns | keyvalue"
       [attr.transform]="'translate(' + town.value.x + ',' + town.value.y +')'" class="town">
      <use *ngFor="let playerColor of state.railroadTrack.towns[town.key]?.branchlets; index as i"
           xlink:href="#branchlet"
           [attr.class]="'branchlet ' + playerColor"
           [attr.x]="0.5 + (i % 2) * 17"
           [attr.y]="3 + Math.floor(i / 2) * 15"/>
      <rect x="0" y="0" rx="2" ry="2" height="36" width="36" (click)="selectTown(town.key)"
            [ngClass]="{disabled:!canSelectTown(town.key)}"/>
    </g>

    <circle *ngFor="let color of state.railroadTrack.cities['KANSAS_CITY']; index as i"
            [class]="'disc ' + color"
            cx="147"
            [attr.cy]="210 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['COLUMBIA']; index as i"
            [class]="'disc ' + color"
            cx="210"
            [attr.cy]="210 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['ST_LOUIS']; index as i"
            [class]="'disc ' + color"
            cx="305.5"
            [attr.cy]="209.5 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['CHICAGO']; index as i"
            [class]="'disc ' + color"
            cx="368.5"
            [attr.cy]="210 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['DETROIT']; index as i"
            [class]="'disc ' + color"
            cx="495"
            [attr.cy]="209 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['CLEVELAND']; index as i"
            [class]="'disc ' + color"
            cx="558.25"
            [attr.cy]="209 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['PITTSBURGH']; index as i"
            [class]="'disc ' + color"
            cx="655"
            [attr.cy]="209 - (i * 4)"
            r="11"/>

    <circle *ngFor="let color of state.railroadTrack.cities['NEW_YORK_CITY']; index as i"
            [class]="'disc ' + color"
            cx="747.5"
            [attr.cy]="209 - (i * 4)"
            r="11"/>

    <rect class="city"
          x="121"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('KANSAS_CITY')" [ngClass]="{disabled:!canSelectCity('KANSAS_CITY')}"/>
    <rect class="city"
          x="183"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('COLUMBIA')" [ngClass]="{disabled:!canSelectCity('COLUMBIA')}"/>
    <rect class="city"
          x="279"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('ST_LOUIS')" [ngClass]="{disabled:!canSelectCity('ST_LOUIS')}"/>
    <rect class="city"
          x="343"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('CHICAGO')" [ngClass]="{disabled:!canSelectCity('CHICAGO')}"/>
    <rect class="city"
          x="470"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('DETROIT')" [ngClass]="{disabled:!canSelectCity('DETROIT')}"/>
    <rect class="city"
          x="533"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('CLEVELAND')" [ngClass]="{disabled:!canSelectCity('CLEVELAND')}"/>
    <rect class="city"
          x="629"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('PITTSBURGH')" [ngClass]="{disabled:!canSelectCity('PITTSBURGH')}"/>
    <rect class="city"
          x="722"
          y="191"
          rx="2"
          ry="2"
          height="50"
          width="52"
          (click)="selectCity('NEW_YORK_CITY')" [ngClass]="{disabled:!canSelectCity('NEW_YORK_CITY')}"/>
  </g>
  <g [attr.transform]="'translate(0, ' + (state.railsToTheNorth ? 195 : 0) + ')'">
    <g id="foresights" transform="translate(21.5,195)" class="foresights" [ngClass]="{disabled:!canChooseForesights}">
      <g transform="translate(0,0)" *ngIf="foresights[2][0]">
        <use [attr.xlink:href]="'#' + foresights[2][0].href"
             class="foresight"
             [ngClass]="{disabled:!canSelectForesight(2,0), selected:isForesightSelected(2,0), otherSelected: isForesightSelected(2,1)}"
             (click)="selectForesight(0,2)"/>
        <text *ngIf="foresights[2][0].points" x="21" y="33" class="points">{{foresights[2][0].points}}</text>
      </g>
      <g transform="translate(34,0)" *ngIf="foresights[1][0]">
        <use [attr.xlink:href]="'#' + foresights[1][0].href"
             class="foresight"
             [ngClass]="{disabled:!canSelectForesight(1,0), selected:isForesightSelected(1,0), otherSelected: isForesightSelected(1,1)}"
             (click)="selectForesight(0,1)"/>
        <text *ngIf="foresights[1][0].points" x="21" y="33" class="points">{{foresights[1][0].points}}</text>
      </g>
      <g transform="translate(68,0)" *ngIf="foresights[0][0]">
        <use [attr.xlink:href]="'#' + foresights[0][0].href"
             class="foresight"
             [ngClass]="{disabled:!canSelectForesight(0,0), selected:isForesightSelected(0,0), otherSelected: isForesightSelected(0,1)}"
             (click)="selectForesight(0,0)"/>
        <text *ngIf="foresights[0][0].points" x="21" y="33" class="points">{{foresights[0][0].points}}</text>
      </g>

      <g transform="translate(0,40)" *ngIf="foresights[2][1]">
        <use [attr.xlink:href]="'#' + foresights[2][1].href"
             class="foresight"
             [ngClass]="{disabled:!canSelectForesight(2,1), selected:isForesightSelected(2,1), otherSelected: isForesightSelected(2,0)}"
             (click)="selectForesight(1,2)"/>
        <text *ngIf="foresights[2][1].points" x="21" y="33" class="points">{{foresights[2][1].points}}</text>
      </g>
      <g transform="translate(34,40)" *ngIf="foresights[1][1]">
        <use [attr.xlink:href]="'#' + foresights[1][1].href"
             class="foresight"
             [ngClass]="{disabled:!canSelectForesight(1,1), selected:isForesightSelected(1,1), otherSelected: isForesightSelected(1,0)}"
             (click)="selectForesight(1,1)"/>
        <text *ngIf="foresights[1][1].points" x="21" y="33" class="points">{{foresights[1][1].points}}</text>
      </g>
      <g transform="translate(68,40)" *ngIf="foresights[0][1]">
        <use [attr.xlink:href]="'#' + foresights[0][1].href"
             class="foresight"
             [ngClass]="{disabled:!canSelectForesight(0,1), selected:isForesightSelected(0,1), otherSelected: isForesightSelected(0,0)}"
             (click)="selectForesight(1,0)"/>
        <text *ngIf="foresights[0][1].points" x="21" y="33" class="points">{{foresights[0][1].points}}</text>
      </g>
    </g>

    <g id="cities" class="cities" *ngIf="!state.railsToTheNorth">
      <circle *ngFor="let color of state.railroadTrack.cities['KANSAS_CITY']; index as i"
              [class]="'disc ' + color"
              cx="147"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[1]]; index as i"
              [class]="'disc ' + color"
              cx="210"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[2]]; index as i"
              [class]="'disc ' + color"
              cx="305"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[3]]; index as i"
              [class]="'disc ' + color"
              cx="368"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[4]]; index as i"
              [class]="'disc ' + color"
              cx="431"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[5]]; index as i"
              [class]="'disc ' + color"
              cx="495"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[6]]; index as i"
              [class]="'disc ' + color"
              cx="558"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[7]]; index as i"
              [class]="'disc ' + color"
              cx="621"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[8]]; index as i"
              [class]="'disc ' + color"
              cx="684"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <circle *ngFor="let color of state.railroadTrack.cities[cityStrip[9]]; index as i"
              [class]="'disc ' + color"
              cx="748"
              [attr.cy]="17 - (i * 4)"
              r="11"/>

      <rect id="city-KANSAS_CITY"
            class="city"
            x="121"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[0])" [ngClass]="{disabled:!canSelectCity(cityStrip[0])}"/>
      <rect id="city-1"
            class="city"
            x="184"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[1])" [ngClass]="{disabled:!canSelectCity(cityStrip[1])}"/>
      <rect id="city-2"
            class="city"
            x="279"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[2])" [ngClass]="{disabled:!canSelectCity(cityStrip[2])}"/>
      <rect id="city-3"
            class="city"
            x="343"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[3])" [ngClass]="{disabled:!canSelectCity(cityStrip[3])}"/>
      <rect id="city-4"
            class="city"
            x="406"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[4])" [ngClass]="{disabled:!canSelectCity(cityStrip[4])}"/>
      <rect id="city-5"
            class="city"
            x="469"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[5])" [ngClass]="{disabled:!canSelectCity(cityStrip[5])}"/>
      <rect id="city-6"
            class="city"
            x="532"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[6])" [ngClass]="{disabled:!canSelectCity(cityStrip[6])}"/>
      <rect id="city-7"
            class="city"
            x="595"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[7])" [ngClass]="{disabled:!canSelectCity(cityStrip[7])}"/>
      <rect id="city-8"
            class="city"
            x="659"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[8])" [ngClass]="{disabled:!canSelectCity(cityStrip[8])}"/>
      <rect id="city-9"
            class="city"
            x="722"
            y="0"
            rx="2"
            ry="2"
            height="50"
            width="52"
            (click)="selectCity(cityStrip[9])" [ngClass]="{disabled:!canSelectCity(cityStrip[9])}"/>
    </g>

    <g id="railroad-track" class="railroad-track">

      <!-- Station 0 -->
      <circle *ngFor="let color of state.railroadTrack.stations[0].players; index as i"
              [class]="'disc ' + color"
              cx="322"
              [attr.cy]="110 - (i * 4)"
              r="11"/>

      <!-- Station 1 -->
      <circle *ngFor="let color of state.railroadTrack.stations[1].players; index as i"
              [class]="'disc ' + color"
              cx="416"
              [attr.cy]="110 - (i * 4)"
              r="11"/>

      <!-- Station 2 -->
      <circle *ngFor="let color of state.railroadTrack.stations[2].players; index as i"
              [class]="'disc ' + color"
              cx="510"
              [attr.cy]="110 - (i * 4)"
              r="11"/>

      <!-- Station 3 -->
      <circle *ngFor="let color of state.railroadTrack.stations[3].players; index as i"
              [class]="'disc ' + color"
              cx="606"
              [attr.cy]="110 - (i * 4)"
              r="11"/>

      <!-- Station 4 -->
      <circle *ngFor="let color of state.railroadTrack.stations[4].players; index as i"
              [class]="'disc ' + color"
              cx="701"
              [attr.cy]="110 - (i * 4)"
              r="11"/>

      <!-- Station 5 -->
      <circle *ngFor="let color of state.railroadTrack.stations[5].players; index as i"
              [class]="'disc ' + color"
              cx="739"
              [attr.cy]="144 - (i * 4)"
              r="11"/>

      <!-- Station 6 -->
      <circle *ngFor="let color of state.railroadTrack.stations[6].players; index as i"
              [class]="'disc ' + color"
              cx="739"
              [attr.cy]="266 - (i * 4)"
              r="11"/>

      <!-- Station 7 -->
      <circle *ngFor="let color of state.railroadTrack.stations[7].players; index as i"
              [class]="'disc ' + color"
              cx="739"
              [attr.cy]="390 - (i * 4)"
              r="11"/>

      <!-- Station 8 -->
      <circle *ngFor="let color of state.railroadTrack.stations[8].players; index as i"
              [class]="'disc ' + color"
              cx="739"
              [attr.cy]="514 - (i * 4)"
              r="11"/>

      <!-- Station 9 -->
      <circle *ngFor="let color of state.railroadTrack.stations[9].players; index as i"
              [class]="'disc ' + color"
              cx="762"
              [attr.cy]="715 - (i * 4)"
              r="11"/>

      <g transform="translate(271,86)">
        <g *ngIf="state.railroadTrack.stations[0].stationMaster"
           ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[0].stationMaster.toString()|translate}}"
           triggers="mouseenter:mouseleave"
           container="body">
          <use [attr.xlink:href]="'#' + state.railroadTrack.stations[0].stationMaster"/>
        </g>
        <use *ngIf="state.railroadTrack.stations[0].worker"
             [attr.xlink:href]="'#' + state.railroadTrack.stations[0].worker" class="worker disabled"/>
      </g>

      <g transform="translate(365.5,86)">
        <g *ngIf="state.railroadTrack.stations[1].stationMaster"
           ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[1].stationMaster.toString()|translate}}"
           triggers="mouseenter:mouseleave"
           container="body">
          <use [attr.xlink:href]="'#' + state.railroadTrack.stations[1].stationMaster"/>
        </g>
        <use *ngIf="state.railroadTrack.stations[1].worker"
             [attr.xlink:href]="'#' + state.railroadTrack.stations[1].worker" class="worker disabled"/>
      </g>

      <g transform="translate(460,86)">
        <g *ngIf="state.railroadTrack.stations[2].stationMaster"
           ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[2].stationMaster.toString()|translate}}"
           triggers="mouseenter:mouseleave"
           container="body">
          <use [attr.xlink:href]="'#' + state.railroadTrack.stations[2].stationMaster"/>
        </g>
        <use *ngIf="state.railroadTrack.stations[2].worker"
             [attr.xlink:href]="'#' + state.railroadTrack.stations[2].worker" class="worker disabled"/>
      </g>

      <g transform="translate(555,86)">
        <g *ngIf="state.railroadTrack.stations[3].stationMaster"
           ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[3].stationMaster.toString()|translate}}"
           triggers="mouseenter:mouseleave"
           container="body">
          <use [attr.xlink:href]="'#' + state.railroadTrack.stations[3].stationMaster"/>
        </g>
        <use *ngIf="state.railroadTrack.stations[3].worker"
             [attr.xlink:href]="'#' + state.railroadTrack.stations[3].worker" class="worker disabled"/>
      </g>

      <g transform="translate(650,86)">
        <g *ngIf="state.railroadTrack.stations[4].stationMaster"
           ngbPopover="{{'gwt.popover.stationMaster.' + state.railroadTrack.stations[4].stationMaster.toString()|translate}}"
           triggers="mouseenter:mouseleave"
           container="body">
          <use [attr.xlink:href]="'#' + state.railroadTrack.stations[4].stationMaster"/>
        </g>
        <use *ngIf="state.railroadTrack.stations[4].worker"
             [attr.xlink:href]="'#' + state.railroadTrack.stations[4].worker" class="worker disabled"/>
      </g>

      <g *ngFor="let space of spaces"
         [attr.transform]="'translate(' + space.x + ',' + space.y + ') ' + space.transform">

        <use *ngFor="let color of getPlayersAt(space.space); index as i"
             xlink:href="#engine"
             [attr.class]="'engine ' + color"
             [attr.y]="i * 14"/>

        <rect [attr.height]="space.height"
              [attr.width]="space.width"
              class="space"
              [ngClass]="{disabled:!canSelectSpace(space.space), selected:isSpaceSelected(space.space)}"
              (click)="selectSpace(space.space)"/>
      </g>

      <g *ngFor="let e of [].constructor(10); index as i" class="station"
         [attr.transform]="'translate(' + (i < 5 ? (305 + (i * 95)) : (i < 9 ? 722 : 745)) + ',' + (i < 5 ? 95 : (i < 9 ? (127 + ((i-5)*124)) : 700)) + ')'"
         (click)="selectStation(i)"
         [ngClass]="{disabled:!canSelectStation(i)}">
        <rect width="33" height="33" rx="6" ry="6"/>
      </g>
    </g>

    <g class="job-market">
      <g *ngFor="let row of state.jobMarket.rows; index as rowIndex">
        <use *ngFor="let worker of row.workers; index as columnIndex"
             [attr.xlink:href]="'#' + worker"
             class="worker"
             [ngClass]="{disabled:!canSelectWorker(rowIndex)}"
             [attr.x]="9 + ((4-Math.max(state.jobMarket.rowLimit, row.workers.length)) * 33) + (columnIndex * 33)"
             [attr.y]="316 + (rowIndex * 39)"
             (click)="selectWorker(rowIndex, worker)"/>
      </g>

      <use xlink:href="#jobMarketToken" x="110" [attr.y]="319 + (state.jobMarket.currentRowIndex * 39)"/>
    </g>

    <g transform="translate(130,-133)" class="buildings">
      <g #A>
        <image href="/assets/games/gwt/a.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverA"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
      <g #B>
        <image href="/assets/games/gwt/b.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverB"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
      <g #C>
        <image href="/assets/games/gwt/c.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverC"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
      <g #D>
        <image href="/assets/games/gwt/d.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverD"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
      <g #E>
        <image href="/assets/games/gwt/e.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverE"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
      <g #F>
        <image href="/assets/games/gwt/f.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverF"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
      <g #G>
        <image href="/assets/games/gwt/g.png" width="68.058" height="66.48" clip-path="url(#buildingclip)"
               [ngbPopover]="popoverG"
               triggers="mouseenter:mouseleave"
               container="body"/>
      </g>
    </g>

    <g #locations transform="translate(130,-133)" class="locations">
      <rect id="KANSAS_CITY"
            class="location"
            x="-10"
            y="255"
            rx="2"
            ry="2"
            height="45"
            width="62"
            [ngClass]="{disabled:!canSelectLocation('KANSAS_CITY')}"
            (click)="selectLocation('KANSAS_CITY')"/>

      <rect id="START"
            class="location"
            x="626"
            y="875"
            height="30"
            width="44"
            [ngClass]="{disabled:!canSelectLocation('START')}"
            (click)="selectLocation('START')"/>

      <g transform="translate(358.7880323,833.6133355)" *ngIf="state.trail.locations['FLOOD-4']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationFlood4" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="FLOOD-4" x="358.7880323" y="833.6133355" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('FLOOD-4')}"
            (click)="selectLocation('FLOOD-4')"
            [ngbPopover]="popoverLocationFlood4" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(408.931151,840.0237323)" *ngIf="state.trail.locations['FLOOD-3']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationFlood3" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="FLOOD-3" x="408.931151" y="840.0237323" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('FLOOD-3')}"
            (click)="selectLocation('FLOOD-3')"
            [ngbPopover]="popoverLocationFlood3" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(460.3764905,839.6482039)" *ngIf="state.trail.locations['FLOOD-2']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationFlood2" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="FLOOD-2" x="460.3764905" y="839.6482039" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('FLOOD-2')}"
            (click)="selectLocation('FLOOD-2')"
            [ngbPopover]="popoverLocationFlood2" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(511.4463578,844.154348)" *ngIf="state.trail.locations['FLOOD-1']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationFlood1" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="FLOOD-1" x="511.4463578" y="844.154348" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('FLOOD-1')}"
            (click)="selectLocation('FLOOD-1')"
            [ngbPopover]="popoverLocationFlood1" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(60.07891838,751.4024862)" *ngIf="state.trail.locations['DROUGHT-1']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationDrought1" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="DROUGHT-1" x="60.07891838" y="751.4024862" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('DROUGHT-1')}"
            (click)="selectLocation('DROUGHT-1')"
            [ngbPopover]="popoverLocationDrought1" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(54.82173996,693.1979165)" *ngIf="state.trail.locations['DROUGHT-2']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationDrought2" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="DROUGHT-2" x="54.82173996" y="693.1979165" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('DROUGHT-2')}"
            (click)="selectLocation('DROUGHT-2')"
            [ngbPopover]="popoverLocationDrought2" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(63.45855315,637.2463205)" *ngIf="state.trail.locations['DROUGHT-3']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationDrought3" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="DROUGHT-3" x="63.45855315" y="637.2463205" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('DROUGHT-3')}"
            (click)="selectLocation('DROUGHT-3')"
            [ngbPopover]="popoverLocationDrought3" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(67.58920257,581.6703091)" *ngIf="state.trail.locations['DROUGHT-4']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationDrought4" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="DROUGHT-4" x="67.58920257" y="581.6703091" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('DROUGHT-4')}"
            (click)="selectLocation('DROUGHT-4')"
            [ngbPopover]="popoverLocationDrought4" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(536.352691,417.9463335)" *ngIf="state.trail.locations['ROCKFALL-1']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationRockfall1" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="ROCKFALL-1" x="536.352691" y="417.9463335" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('ROCKFALL-1')}"
            (click)="selectLocation('ROCKFALL-1')"
            [ngbPopover]="popoverLocationRockfall1" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(540.3609206,365.7499091)" *ngIf="state.trail.locations['ROCKFALL-2']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationRockfall2" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="ROCKFALL-2" x="540.3609206" y="365.7499091" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('ROCKFALL-2')}"
            (click)="selectLocation('ROCKFALL-2')"
            [ngbPopover]="popoverLocationRockfall2" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(539.2343916,313.5535409)" *ngIf="state.trail.locations['ROCKFALL-3']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationRockfall3" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="ROCKFALL-3" x="539.2343916" y="313.5535409" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('ROCKFALL-3')}"
            (click)="selectLocation('ROCKFALL-3')"
            [ngbPopover]="popoverLocationRockfall3" triggers="mouseenter:mouseleave" container="body"/>

      <g transform="translate(505.4014015,265.94122686)" *ngIf="state.trail.locations['ROCKFALL-4']?.hazard as hazard"
         class="hazard">
        <image
          [attr.href]="'/assets/games/gwt/' + hazard.type.toLowerCase() + '_' + hazard.hands.toLowerCase() + '.png'"
          width="33" height="39" clip-path="url(#tileclip)"
          [ngbPopover]="popoverLocationRockfall4" triggers="mouseenter:mouseleave" container="body"/>
        <text x="21" y="33" class="points">{{hazard.points}}</text>
      </g>
      <rect id="ROCKFALL-4" x="505.4014015" y="265.94122686" width="33" height="39" rx="6" ry="6"
            class="location hazard" [ngClass]="{disabled:!canSelectLocation('ROCKFALL-4')}"
            (click)="selectLocation('ROCKFALL-4')"
            [ngbPopover]="popoverLocationRockfall4" triggers="mouseenter:mouseleave" container="body"/>

      <g class="teepeeLocations" #teepeeLocations>
        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE-1'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE-1'].teepee" y="665.6374365" x="235.67607971"
             (click)="selectTeepee('TEEPEE-1')" [ngClass]="{disabled:!canSelectTeepee}"/>
        <use xlink:href="#teepeeLocation" class="location teepee" y="665.6374365" x="235.67607971" id="TEEPEE-1"
             (click)="selectLocation('TEEPEE-1')" [ngClass]="{disabled:!canSelectLocation('TEEPEE-1')}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE-2'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE-2'].teepee" y="671.4180561" x="277.50137016"
             (click)="selectTeepee('TEEPEE-2')" [ngClass]="{disabled:!canSelectTeepee}"/>
        <use xlink:href="#teepeeLocation" class="location teepee" y="671.4180561" x="277.50137016" id="TEEPEE-2"
             (click)="selectLocation('TEEPEE-2')" [ngClass]="{disabled:!canSelectLocation('TEEPEE-2')}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE-4'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE-4'].teepee" y="680.8059289" x="321.4364901"
             (click)="selectTeepee('TEEPEE-4')" [ngClass]="{disabled:!canSelectTeepee}"/>
        <use xlink:href="#teepeeLocation" class="location teepee" y="680.8059289" x="321.4364901" id="TEEPEE-4"
             (click)="selectLocation('TEEPEE-4')" [ngClass]="{disabled:!canSelectLocation('TEEPEE-4')}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE-6'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE-6'].teepee" y="683.7798081" x="364.1911178"
             (click)="selectTeepee('TEEPEE-6')" [ngClass]="{disabled:!canSelectTeepee}"/>
        <use xlink:href="#teepeeLocation" class="location teepee" y="683.7798081" x="364.1911178" id="TEEPEE-6"
             (click)="selectLocation('TEEPEE-6')" [ngClass]="{disabled:!canSelectLocation('TEEPEE-6')}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE-8'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE-8'].teepee" y="686.7536873" x="405.4587778"
             (click)="selectTeepee('TEEPEE-8')" [ngClass]="{disabled:!canSelectTeepee}"/>
        <use xlink:href="#teepeeLocation" class="location teepee" y="686.7536873" x="405.4587778" id="TEEPEE-8"
             (click)="selectLocation('TEEPEE-8')" [ngClass]="{disabled:!canSelectLocation('TEEPEE-8')}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE-10'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE-10'].teepee" y="683.77978" x="448.2134055"
             (click)="selectTeepee('TEEPEE-10')" [ngClass]="{disabled:!canSelectTeepee}"/>
        <use xlink:href="#teepeeLocation" class="location teepee" y="683.77978" x="448.2134055" id="TEEPEE-10"
             (click)="selectLocation('TEEPEE-10')" [ngClass]="{disabled:!canSelectLocation('TEEPEE-10')}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE--1'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE--1'].teepee" y="621.0992737" x="352.2437003"
             (click)="selectTeepee('TEEPEE--1')" [ngClass]="{disabled:!canSelectTeepee}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE--2'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE--2'].teepee" y="616.953484" x="395.8186232"
             (click)="selectTeepee('TEEPEE--2')" [ngClass]="{disabled:!canSelectTeepee}"/>

        <use class="teepee" *ngIf="state.trail.teepeeLocations['TEEPEE--3'].teepee"
             [attr.xlink:href]="'#' + state.trail.teepeeLocations['TEEPEE--3'].teepee" y="613.9796048" x="438.5730261"
             (click)="selectTeepee('TEEPEE--3')" [ngClass]="{disabled:!canSelectTeepee}"/>
      </g>

      <g class="buildingLocations" #buildingLocations>
        <image width="68.058" height="66.48" y="809.0254702" x="188.73680282"
               *ngIf="state.trail.locations['FLOOD-RISK-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationFloodRisk2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="809.0254702" x="188.73680282"
              id="FLOOD-RISK-2"
              (click)="selectLocation('FLOOD-RISK-2')" [ngClass]="{disabled:!canSelectLocation('FLOOD-RISK-2')}"
              [ngbPopover]="popoverLocationFloodRisk2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="811.6807797" x="271.05055994"
               *ngIf="state.trail.locations['FLOOD-RISK-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationFloodRisk1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="811.6807797" x="271.05055994"
              id="FLOOD-RISK-1"
              (click)="selectLocation('FLOOD-RISK-1')" [ngClass]="{disabled:!canSelectLocation('FLOOD-RISK-1')}"
              [ngbPopover]="popoverLocationFloodRisk1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="747.4228799" x="406.4700125"
               *ngIf="state.trail.locations['A-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationA1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="747.4228799" x="406.4700125"
              id="A-1"
              (click)="selectLocation('A-1')" [ngClass]="{disabled:!canSelectLocation('A-1')}"
              [ngbPopover]="popoverLocationA1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="737.3328443" x="317.2525125"
               *ngIf="state.trail.locations['A-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationA2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="737.3328443" x="317.2525125"
              id="A-2"
              (click)="selectLocation('A-2')" [ngClass]="{disabled:!canSelectLocation('A-2')}"
              [ngbPopover]="popoverLocationA2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="727.2427244" x="226.97290837"
               *ngIf="state.trail.locations['A-3']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationA3"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="727.2427244" x="226.97290837"
              id="A-3"
              (click)="selectLocation('A-3')" [ngClass]="{disabled:!canSelectLocation('A-3')}"
              [ngbPopover]="popoverLocationA3"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="706.0005013" x="119.16841328"
               *ngIf="state.trail.locations['B-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationB1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="706.0005013" x="119.16841328"
              id="B-1"
              (click)="selectLocation('B-1')" [ngClass]="{disabled:!canSelectLocation('B-1')}"
              [ngbPopover]="popoverLocationB1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="622.624626" x="135.10008763"
               *ngIf="state.trail.locations['B-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationB2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="622.624626" x="135.10008763"
              id="B-2"
              (click)="selectLocation('B-2')" [ngClass]="{disabled:!canSelectLocation('B-2')}"
              [ngbPopover]="popoverLocationB2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="548.2767187" x="183.95728225"
               *ngIf="state.trail.locations['B-3']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationB3"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="548.2767187" x="183.95728225"
              id="B-3"
              (click)="selectLocation('B-3')" [ngClass]="{disabled:!canSelectLocation('B-3')}"
              [ngbPopover]="popoverLocationB3"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="500.4816535" x="69.24906395"
               *ngIf="state.trail.locations['DROUGHT-RISK-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationDroughtRisk1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="500.4816535" x="69.24906395"
              id="DROUGHT-RISK-1" (click)="selectLocation('DROUGHT-RISK-1')"
              [ngClass]="{disabled:!canSelectLocation('DROUGHT-RISK-1')}"
              [ngbPopover]="popoverLocationDroughtRisk1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="641.7426577" x="499.9359515"
               *ngIf="state.trail.locations['INDIAN-TRADE-RISK-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationIndianTradeRisk1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="641.7426577" x="499.9359515"
              id="INDIAN-TRADE-RISK-1" (click)="selectLocation('INDIAN-TRADE-RISK-1')"
              [ngClass]="{disabled:!canSelectLocation('INDIAN-TRADE-RISK-1')}"
              [ngbPopover]="popoverLocationIndianTradeRisk1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="564.7382326" x="499.9359515"
               *ngIf="state.trail.locations['INDIAN-TRADE-RISK-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationIndianTradeRisk2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="564.7382326" x="499.9359515"
              id="INDIAN-TRADE-RISK-2" (click)="selectLocation('INDIAN-TRADE-RISK-2')"
              [ngClass]="{disabled:!canSelectLocation('INDIAN-TRADE-RISK-2')}"
              [ngbPopover]="popoverLocationIndianTradeRisk2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="444.720716" x="314.5971749"
               *ngIf="state.trail.locations['C-1-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationC11"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="444.720716" x="314.5971749"
              id="C-1-1"
              (click)="selectLocation('C-1-1')" [ngClass]="{disabled:!canSelectLocation('C-1-1')}"
              [ngbPopover]="popoverLocationC11"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="437.8169675" x="402.2215173"
               *ngIf="state.trail.locations['C-1-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationC12"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="437.8169675" x="402.2215173"
              id="C-1-2"
              (click)="selectLocation('C-1-2')" [ngClass]="{disabled:!canSelectLocation('C-1-2')}"
              [ngbPopover]="popoverLocationC12"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="533.4071822" x="313.0040454"
               *ngIf="state.trail.locations['C-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationC2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="533.4071822" x="313.0040454"
              id="C-2" *ngIf="table.game !== 'gwt2'"
              (click)="selectLocation('C-2')" [ngClass]="{disabled:!canSelectLocation('C-2')}"
              [ngbPopover]="popoverLocationC2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="521" x="401"
               *ngIf="state.trail.locations['D-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationD1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="520.10" x="400.62"
              id="D-1" *ngIf="table.game === 'gwt2'"
              (click)="selectLocation('D-1')" [ngClass]="{disabled:!canSelectLocation('D-1')}"
              [ngbPopover]="popoverLocationD1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="360.8137507" x="428.7743875"
               *ngIf="state.trail.locations['E-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationE1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="360.8137507" x="428.7743875"
              id="E-1"
              (click)="selectLocation('E-1')" [ngClass]="{disabled:!canSelectLocation('E-1')}"
              [ngbPopover]="popoverLocationE1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="359.751655" x="330.5289195"
               *ngIf="state.trail.locations['E-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationE2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="359.751655" x="330.5289195"
              id="E-2"
              (click)="selectLocation('E-2')" [ngClass]="{disabled:!canSelectLocation('E-2')}"
              [ngbPopover]="popoverLocationE2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="380.4628443" x="216.35171252"
               *ngIf="state.trail.locations['F-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationF2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="380.4628443" x="216.35171252"
              id="F-2"
              (click)="selectLocation('F-2')" [ngClass]="{disabled:!canSelectLocation('F-2')}"
              [ngbPopover]="popoverLocationF2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="271.59625913" x="417.6222"
               *ngIf="state.trail.locations['ROCKFALL-RISK-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationRockfallRisk1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="271.59625913" x="417.6222"
              id="ROCKFALL-RISK-1"
              (click)="selectLocation('ROCKFALL-RISK-1')" [ngClass]="{disabled:!canSelectLocation('ROCKFALL-RISK-1')}"
              [ngbPopover]="popoverLocationRockfallRisk1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="269.47201434" x="328.9357338"
               *ngIf="state.trail.locations['ROCKFALL-RISK-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationRockfallRisk2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="269.47201434" x="328.9357338"
              id="ROCKFALL-RISK-2" (click)="selectLocation('ROCKFALL-RISK-2')"
              [ngClass]="{disabled:!canSelectLocation('ROCKFALL-RISK-2')}"
              [ngbPopover]="popoverLocationRockfallRisk2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="282.7484382" x="157.93550767"
               *ngIf="state.trail.locations['F-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationF1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="282.7484382" x="157.93550767"
              id="F-1"
              (click)="selectLocation('F-1')" [ngClass]="{disabled:!canSelectLocation('F-1')}"
              [ngbPopover]="popoverLocationF1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="268.40990459" x="60.22112124"
               *ngIf="state.trail.locations['G-2']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationG2"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="268.40990459" x="60.22112124"
              id="G-2"
              (click)="selectLocation('G-2')" [ngClass]="{disabled:!canSelectLocation('G-2')}"
              [ngbPopover]="popoverLocationG2"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <image width="68.058" height="66.48" y="346.4752199" x="28.88877824"
               *ngIf="state.trail.locations['G-1']?.building as building"
               [attr.href]="'/assets/games/' + table.game + '/buildings/' + building.name + '_' + building.player.color.toString().toLowerCase() + '.png'"
               [ngbPopover]="popoverLocationG1"
               triggers="mouseenter:mouseleave"
               container="body"/>
        <rect class="location building" ry="3.699049" height="68.08" width="66.49" y="346.4752199" x="28.88877824"
              id="G-1"
              (click)="selectLocation('G-1')" [ngClass]="{disabled:!canSelectLocation('G-1')}"
              [ngbPopover]="popoverLocationG1"
              triggers="mouseenter:mouseleave"
              container="body"/>

        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              x="498.19"
              y="755.45"
              id="A" (click)="selectLocation('A')" [ngClass]="{disabled:!canSelectLocation('A')}"
              [ngbPopover]="popoverLocationA"
              triggers="mouseenter:mouseleave"
              container="body"/>
        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              x="96.13"
              y="808.49"
              id="B" (click)="selectLocation('B')" [ngClass]="{disabled:!canSelectLocation('B')}"
              [ngbPopover]="popoverLocationB"
              triggers="mouseenter:mouseleave"
              container="body"/>
        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              x="224.84"
              y="467.64"
              id="C" (click)="selectLocation('C')" [ngClass]="{disabled:!canSelectLocation('C')}"
              [ngbPopover]="popoverLocationC"
              triggers="mouseenter:mouseleave"
              container="body"/>
        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              [attr.x]="table.game === 'gwt2' ? 313.0040454 : 400.62"
              [attr.y]="table.game === 'gwt2' ? 533.4071822: 520.10"
              id="D" (click)="selectLocation('D')" [ngClass]="{disabled:!canSelectLocation( 'D')}"
              [ngbPopover]="popoverLocationD"
              triggers="mouseenter:mouseleave"
              container="body"/>
        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              x="496.22"
              y="474.98"
              id="E" (click)="selectLocation('E')" [ngClass]="{disabled:!canSelectLocation('E')}"
              [ngbPopover]="popoverLocationE"
              triggers="mouseenter:mouseleave"
              container="body"/>
        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              x="242.904"
              y="296.001"
              id="F" (click)="selectLocation('F')" [ngClass]="{disabled:!canSelectLocation('F')}"
              [ngbPopover]="popoverLocationF"
              triggers="mouseenter:mouseleave"
              container="body"/>
        <rect class="location building neutral" ry="3.699049" height="68.08" width="66.49"
              x="119.69"
              y="377.80"
              id="G" (click)="selectLocation('G')" [ngClass]="{disabled:!canSelectLocation('G')}"
              [ngbPopover]="popoverLocationG"
              triggers="mouseenter:mouseleave"
              container="body"/>
      </g>

      <g class="ranchers">
        <use xlink:href="#rancher" ref-red="" class="red"></use>
        <use xlink:href="#rancher" ref-blue="" class="blue"></use>
        <use xlink:href="#rancher" ref-yellow="" class="yellow"></use>
        <use xlink:href="#rancher" ref-white="" class="white"></use>
        <use xlink:href="#rancher" ref-green="" class="green"></use>
      </g>

      <g class="possible-moves">
        <g *ngFor="let possibleMove of possibleMoveElements; index as i" class="possible-move"
           (click)="selectPossibleMove(possibleMove.possibleMove)">
          <ng-template #popoverContent>
            {{'gwt.popover.route'|translate:{cost: possibleMove.possibleMove.cost} }}
            <ng-container *ngFor="let playerFee of possibleMove.possibleMove.playerFees">
              {{table.players[playerFee.player.name].user?.username || ('computer'|translate|titlecase)}}
              {{'gwt.popover.playerFee'|translate: {fee: playerFee.fee} }}
            </ng-container>
          </ng-template>
          <line *ngFor="let line of possibleMove.lines"
                [attr.x1]="line.x1"
                [attr.y1]="line.y1"
                [attr.x2]="line.x2" [attr.y2]="line.y2"
                [attr.stroke]="possibleMove.color"
                stroke-width="10"
                stroke-linejoin="round"
                stroke-linecap="round"
                triggers="mouseenter:mouseleave"
                container="body"
                [ngbPopover]="popoverContent" [popoverClass]="possibleMove.color"/>
        </g>
      </g>
    </g>
  </g>
</svg>
