<!--
  ~ Board Game Fiesta
  ~ Copyright (C)  2021 Tom Wetjens <tomwetjens@gmail.com>
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div class="modal-header">
  <h4 class="modal-title">{{'gwt.endedDialog'|translate}}</h4>
  <button type="button" class="btn close" aria-label="Close" (click)="ngbActiveModal.dismiss()">
    <span aria-hidden="true">&times;</span>
  </button>
</div>
<div class="modal-body">
  <table class="table table-sm">
    <thead>
    <tr>
      <th scope="col"></th>
      <th scope="col" class="text-nowrap" *ngFor="let column of columns">
        <app-player-name [player]="column.player"></app-player-name>
        <span class="place1st" *ngIf="column.player.winner"></span>
      </th>
    </tr>
    <tr>
      <th scope="col" class="text-nowrap">{{'gwt.score.total'|translate}}</th>
      <th scope="col" *ngFor="let column of columns">
        <strong>{{column.total}}</strong>
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let row of rows">
      <th scope="row" class="text-nowrap">{{'gwt.score.' + row.category|translate}}</th>
      <td *ngFor="let score of row.scores">{{score}}</td>
    </tr>
    <tr>
      <td [colSpan]="table.numberOfPlayers + 1">
        <h5>{{'gwt.statsHeader'|translate}}</h5>
      </td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.seat'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.seat}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.turns'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.turns}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.cowboys'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.cowboys}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.craftsmen'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.craftsmen}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.engineers'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.engineers}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.stepLimit'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.stepLimit}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.handLimit'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.handLimit}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.permCerts'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.permCerts}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.tempCerts'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.tempCerts}}</td>
    </tr>
    <tr>
      <th scope="row">{{'gwt.stats.tempCertLimit'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats?.tempCertLimit}}</td>
    </tr>
    <tr *ngFor="let city of cities">
      <th scope="row" class="text-nowrap">{{'gwt.stats.deliveries'|translate}} {{table.game + '.log.values.' + city|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats ? column.playerState.stats['deliveries.' + city]||0 : ''}}</td>
    </tr>
    <tr *ngFor="let building of buildings">
      <th scope="row" class="text-nowrap">{{'gwt.stats.stops'|translate}} {{building}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats ? column.playerState.stats['stops.' + building]||0 : ''}}</td>
    </tr>
    <tr>
      <th scope="row" class="text-nowrap">{{'gwt.stats.stopsTeepee'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats ? column.playerState.stats['stops.teepee']||0 : ''}}</td>
    </tr>
    <tr>
      <th scope="row" class="text-nowrap">{{'gwt.stats.stopsHazard'|translate}}</th>
      <td scope="col" *ngFor="let column of columns">{{column.playerState.stats ? column.playerState.stats['stops.hazard']||0 : 0}}</td>
    </tr>
    </tbody>
  </table>
</div>
<div class="modal-footer">
</div>
