<!--
  ~ Board Game Fiesta
  ~ Copyright (C)  2021 Tom Wetjens <tomwetjens@gmail.com>
  ~
  ~ This program is free software: you can redistribute it and/or modify
  ~ it under the terms of the GNU General Public License as published by
  ~ the Free Software Foundation, either version 3 of the License, or
  ~ (at your option) any later version.
  ~
  ~ This program is distributed in the hope that it will be useful,
  ~ but WITHOUT ANY WARRANTY; without even the implied warranty of
  ~ MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
  ~ GNU General Public License for more details.
  ~
  ~ You should have received a copy of the GNU General Public License
  ~ along with this program.  If not, see <http://www.gnu.org/licenses/>.
  -->

<div ngbDropdown placement="bottom-right">
  <button id="inGameMenu" class="navbar-toggler" type="button" ngbDropdownToggle [title]="'menu'|translate">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div ngbDropdownMenu aria-labelledby="inGameMenu" class="dropdown-menu">
    <div ngbDropdownItem>
      {{'in-game-menu.sounds'|translate}}
      <div class="btn-group btn-group-toggle">
        <button class="btn btn-sm" (click)="toggleChannel('ALERTS')"
                [ngClass]="{active:!isMuted('ALERTS')}"
                [title]="('in-game-menu.alerts.' + (isMuted('ALERTS') ? 'unmute':'mute')) |translate">
          <svg class="bi" width="16" height="16" fill="currentColor">
            <use [attr.xlink:href]="'/assets/bootstrap-icons.svg#' + (isMuted('ALERTS') ? 'bell' : 'bell-fill')"/>
          </svg>
        </button>
        <button class="btn btn-sm" (click)="toggleChannel('EFFECTS')"
                [ngClass]="{active:!isMuted('EFFECTS')}"
                [title]="('in-game-menu.effects.' + (isMuted('EFFECTS') ? 'unmute':'mute')) |translate">
          <svg class="bi" width="16" height="16" fill="currentColor">
            <use [attr.xlink:href]="'/assets/bootstrap-icons.svg#' + (isMuted('EFFECTS') ? 'volume-mute' : 'volume-down-fill')"/>
          </svg>
        </button>
        <button class="btn btn-sm" (click)="toggleChannel('VOICE_OVER')"
                [ngClass]="{active:!isMuted('VOICE_OVER')}"
                [title]="('in-game-menu.voiceOver.' + (isMuted('VOICE_OVER') ? 'unmute':'mute')) |translate">
          <svg class="bi" width="16" height="16" fill="currentColor">
            <use [attr.xlink:href]="'/assets/bootstrap-icons.svg#' + (isMuted('VOICE_OVER') ? 'chat-quote' : 'chat-quote-fill')"/>
          </svg>
        </button>
        <button class="btn btn-sm" (click)="toggleChannel('MUSIC')"
                [ngClass]="{active:!isMuted('MUSIC')}"
                [title]="('in-game-menu.music.' + (isMuted('MUSIC') ? 'unmute':'mute')) |translate">
          <svg class="bi" width="16" height="16" fill="currentColor">
            <use [attr.xlink:href]="'/assets/bootstrap-icons.svg#' + (isMuted('MUSIC') ? 'file-music' : 'file-music-fill')"/>
          </svg>
        </button>
      </div>
    </div>
    <div ngbDropdownItem disabled>
      {{'table.type'|translate}}: {{'table.types.' + table.type|translate}}
    </div>
    <div ngbDropdownItem disabled *ngIf="table.status === 'STARTED'">
      {{'startedAt'|translate}}: {{table.started | moment: 'LLL'}}
    </div>
    <div ngbDropdownItem disabled *ngIf="table.status === 'ENDED'">
      {{'endedAt'|translate}}: {{table.ended | moment: 'LLL'}}
    </div>
    <button ngbDropdownItem class="text-danger" (click)="leave()" *ngIf="table.canLeave">
      <svg class="bi" width="16" height="16" fill="currentColor">
        <use xlink:href="/assets/bootstrap-icons.svg#x-square-fill"/>
      </svg>
      {{'leave'|translate}}
    </button>
  </div>
</div>
